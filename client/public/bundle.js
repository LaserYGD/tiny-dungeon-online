!function(s){var t={};function e(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return s[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=s,e.c=t,e.d=function(s,t,a){e.o(s,t)||Object.defineProperty(s,t,{enumerable:!0,get:a})},e.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},e.t=function(s,t){if(1&t&&(s=e(s)),8&t)return s;if(4&t&&"object"==typeof s&&s&&s.__esModule)return s;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var r in s)e.d(a,r,function(t){return s[t]}.bind(null,r));return a},e.n=function(s){var t=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(t,"a",t),t},e.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)},e.p="/public",e(e.s=3)}([function(s,t,e){"use strict";var a=e(1);e.d(t,"GridConfig",(function(){return a.a}));e(2)},function(s,t,e){"use strict";e.d(t,"a",(function(){return a}));class a{constructor(s){this.width=0,this.height=0,this.rows=0,this.columns=0,Object.assign(this,s)}get cellWidth(){return this.width/this.rows}get cellHeight(){return this.height/this.columns}}},function(s,t){},function(s,t,e){"use strict";e.r(t);class a{constructor(s){this.config=s;const t=document.getElementById("draw");t.onmousemove=this.mouseMove.bind(this),t.onmousedown=this.mouseClick.bind(this),t.onmouseup=this.mouseClick.bind(this),t.ontouchmove=this.mouseMove.bind(this),t.ontouchstart=this.mouseClick.bind(this),t.ontouchend=this.mouseClick.bind(this),t.oncontextmenu=()=>!1,this.ctx=t.getContext("2d"),this.ctx.canvas.width=s.width,this.ctx.canvas.height=s.height,this.drawing=!1,this.erasing=!1,this.drawGrid(),this.drawingMatrix=this.getInitDrawingMatrix()}mouseMove(s){s=s||window.event;let t=this.getOffset(s);(this.drawing||this.erasing)&&this.draw(t.x,t.y)}mouseClick(s){s=s||window.event;let t=this.getOffset(s);"mousedown"===s.type||"touchstart"===s.type||"touchmove"===s.type?("mousedown"===s.type?0==s.button?(this.drawing=!0,this.erasing=!1):2==s.button&&(this.erasing=!0,this.drawing=!1):(this.drawing=!0,this.erasing=!1),this.draw(t.x,t.y)):(this.drawing=!1,this.erasing=!1)}getOffset(s){let t=0,e=0;s instanceof TouchEvent?s.touches.length>0&&(t=s.touches[0].clientX,e=s.touches[0].clientY):(t=s.clientX,e=s.clientY);const a=(s.target||s.srcElement).getBoundingClientRect();return{x:0|t-a.left,y:0|e-a.top}}draw(s,t){s=Math.floor(s/this.config.cellWidth),t=Math.floor(t/this.config.cellHeight);let e="black",a=1;this.erasing&&(e="white",a=0),this.ctx.beginPath(),this.ctx.rect(s*this.config.cellWidth,t*this.config.cellHeight,this.config.cellWidth,this.config.cellHeight),this.ctx.fillStyle=e,this.ctx.fill(),this.ctx.stroke(),this.drawingMatrix[t][s]=a}drawGrid(){for(let s=0;s<this.config.rows;s++)for(let t=0;t<this.config.columns;t++)this.ctx.beginPath(),this.ctx.rect(s*this.config.cellWidth,t*this.config.cellHeight,this.config.cellWidth,this.config.cellHeight),this.ctx.stroke()}reset(){this.drawingMatrix.length=0,this.ctx.clearRect(0,0,this.config.width,this.config.height),this.drawGrid(),this.drawingMatrix=this.getInitDrawingMatrix()}getInitDrawingMatrix(){let s=[];for(let t=0;t<this.config.rows;t++){s.push([]);for(let e=0;e<this.config.columns;e++)s[t][e]=0}return s}}var r,l,i=e(0);class G{constructor(s){this.game=s;const t=document.getElementById("background-layer");this.ctx=t.getContext("2d"),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor="",this.ctx.canvas.width=this.game.gridConfig.width,this.ctx.canvas.height=this.game.gridConfig.height}clear(){this.ctx.clearRect(0,0,this.game.gridConfig.width,this.game.gridConfig.height)}}class n{constructor(s){this.game=s;const t=document.getElementById("solid-layer");this.ctx=t.getContext("2d"),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor="",this.ctx.canvas.width=this.game.gridConfig.width,this.ctx.canvas.height=this.game.gridConfig.height}clear(){this.ctx.clearRect(0,0,this.game.gridConfig.width,this.game.gridConfig.height)}}!function(s){s.Black="#000000",s.DarkBlue="#1D2B53",s.DarkPurple="#7E2553",s.DarkGreen="#008751",s.Brown="#AB5236",s.DarkGrey="#5F574F",s.LightGrey="#C2C3C7",s.White="#FFF1E8",s.Red="#FF004D",s.Orange="#FFA300",s.Yellow="#FFEC27",s.Green="#00E436",s.Blue="#29ADFF",s.Lavender="#83769C",s.Pink="#FF77A8",s.LightPeach="#FFCCAA"}(r||(r={})),function(s){s.White="#FCFCFC",s.White2="#F8F8F8",s.LightGrey="#bcbcbc",s.Grey="#787878",s.DarkGrey="#7c7c7c",s.Black="#000000",s.LightRed="#e40058",s.Red="#a80020",s.DarkRed="#a81000",s.Wine="#881400",s.LightBrown="#ac7c00",s.Brown="#503000",s.LightOrange="#f87858",s.Orange="#e45c10",s.DarkOrange="#f83800",s.LightYellow="#f0d0b0",s.LightYellow2="#fce0a8",s.LightYellow3="#f8d878",s.Yellow="#f8b800",s.DarkYellow="#fca044",s.LightGreen="#b8f8d8",s.LightGreen2="#b8f8b8",s.LightGreen3="#d8f878",s.LightGreen4="#b8f818",s.LightGreen5="#58f898",s.LightGreen6="#58d854",s.Green="#00b800",s.Green2="#00a800",s.Green3="#00a844",s.Green4="#007800",s.DarkGreen="#006800",s.DarkGreen2="#005800",s.GreenBlue="#00fcfc",s.GreenBlue2="#00e8d8",s.GreenBlue3="#008888",s.DarkGreenBlue="#004058",s.LightBlue="#a4e4fc",s.Blue="#3cbcfc",s.Blue2="#6888fc",s.Blue3="#0078f8",s.Blue4="#0058f8",s.DarkBlue="#0000fc",s.DarkBlue2="#0000bc",s.LightPurple="#b8b8f8",s.LightPurple2="#9878f8",s.Purple="#6844fc",s.DarkPurple="#4428bc",s.LightPink="#f8d8f8",s.LightPink2="#d8b8f8",s.LightPink3="#f8b8f8",s.Pink="#f8a4c0",s.Pink2="#f878f8",s.Pink3="#f85898",s.DarkPink="#d800cc",s.DarkPink2="#940084"}(l||(l={}));const h=[l.Black,l.DarkBlue,l.DarkGrey,l.DarkPurple,l.Yellow,l.Red];var o,F,g,c,d,m;!function(s){s[s.Up=1]="Up",s[s.Down=2]="Down",s[s.Left=3]="Left",s[s.Right=4]="Right"}(o||(o={})),function(s){s[s.Login=1]="Login",s[s.Move=2]="Move",s[s.Ping=3]="Ping",s[s.Pong=4]="Pong",s[s.Error=5]="Error",s[s.NpcMove=6]="NpcMove",s[s.NpcsInRoom=7]="NpcsInRoom",s[s.Pve=8]="Pve",s[s.ItemsInRoom=9]="ItemsInRoom",s[s.ItemPick=10]="ItemPick",s[s.ItemDrop=11]="ItemDrop",s[s.ItemUse=12]="ItemUse",s[s.ItemWear=13]="ItemWear",s[s.ItemRemove=14]="ItemRemove",s[s.ItemDroped=15]="ItemDroped",s[s.Stats=16]="Stats",s[s.Message=17]="Message",s[s.Dialog=18]="Dialog",s[s.Rank=19]="Rank"}(F||(F={})),function(s){s[s.Initial=0]="Initial",s[s.Woods=1]="Woods",s[s.Woods2=2]="Woods2",s[s.Woods9=3]="Woods9",s[s.Woods10=4]="Woods10",s[s.Woods11=5]="Woods11"}(g||(g={})),function(s){s[s.Player=0]="Player",s[s.Npc=1]="Npc"}(c||(c={})),function(s){s[s.Empty=0]="Empty",s[s.Coffee=1]="Coffee",s[s.Coin=2]="Coin",s[s.BronzeDagger=3]="BronzeDagger"}(d||(d={})),function(s){s[s.None=0]="None",s[s.Head=1]="Head",s[s.Torso=2]="Torso",s[s.Legs=3]="Legs",s[s.Weapon=4]="Weapon"}(m||(m={}));class w{constructor(s,t,e){this.game=s,this.layer=e,this.x=t.x,this.y=t.y,this.color=t.color,this.name=t.name,this.id=t.id,this.currentRoomId=t.currentRoomId,this.hp=t.hp,this.maxHp=t.maxHp,this.pveData=t.pveData,this.isFighting=!1,this.playerSize=8,this.matrix=[...t.matrix]}draw(){this.layer.ctx.beginPath(),this.layer.ctx.fillStyle=this.color;for(let s=0;s<this.playerSize;s++)for(let t=0;t<this.playerSize;t++){if(0!=this.matrix[t][s]){const e=s*this.game.gridConfig.cellWidth/this.playerSize+this.x*this.game.gridConfig.cellWidth|0,a=t*this.game.gridConfig.cellHeight/this.playerSize+this.y*this.game.gridConfig.cellHeight|0,r=this.game.gridConfig.cellWidth/this.playerSize,l=this.game.gridConfig.cellHeight/this.playerSize;this.layer.ctx.fillRect(e,a,r,l)}}this.layer.ctx.fill()}takeDamage(s){this.pveData=s,this.hp=s.playerHp,this.isFighting=!0,this.drawHp(),this.hp<=0&&(this.hp=this.maxHp,this.isFighting=!1)}drawHp(){this.layer.ctx.beginPath(),this.layer.ctx.fillStyle=l.Red,this.layer.ctx.fillRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight-7,this.game.gridConfig.cellWidth,5),this.layer.ctx.fillStyle=l.DarkGreen,this.layer.ctx.fillRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight-7,this.game.gridConfig.cellWidth*this.hp/this.maxHp,5),this.layer.ctx.fill(),this.drawHit()}drawHit(){let s="";this.layer.ctx.font="15px arial",this.layer.ctx.textAlign="center",0==this.pveData.damageCaused?this.layer.ctx.fillStyle=l.Blue:(this.layer.ctx.fillStyle=l.Red,s="-");const t=this.x*this.game.gridConfig.cellWidth+this.game.gridConfig.cellWidth/2,e=this.y*this.game.gridConfig.cellHeight-10;this.layer.ctx.fillText(`${s}${this.pveData.damageCaused}`,t,e)}move(s,t,e){s==this.x&&t==this.y||(this.isFighting=!1),this.x=s,this.y=t,this.currentRoomId=e}isValidMove(s,t){let e=!0;switch(s){case o.Up:this.isOnBorder(t,+this.x,+this.y-1)||t[+this.y-1][+this.x]&&(e=!1);break;case o.Down:this.isOnBorder(t,+this.x,+this.y+1)||t[+this.y+1][+this.x]&&(e=!1);break;case o.Left:this.isOnBorder(t,+this.x-1,+this.y)||t[+this.y][+this.x-1]&&(e=!1);break;case o.Right:this.isOnBorder(t,+this.x+1,+this.y)||t[+this.y][+this.x+1]&&(e=!1)}return e}isOnBorder(s,t,e){let a=!1;return void 0!==s[e]?void 0===s[e][t]&&(a=!0):a=!0,a}}class y{constructor(s,t,e,a){this.game=s,this.layer=t,this.id=e.id,this.roomId=e.roomId,this.x=e.x,this.y=e.y,this.tileSize=8,this.tileMatrix=[...a],this.maxHp=e.maxHp,this.hp=e.hp,this.isFighting=!1}draw(){this.layer.ctx.beginPath();for(let s=0;s<this.tileSize;s++)for(let t=0;t<this.tileSize;t++){const e=this.tileMatrix[t][s];if(0!==e){this.layer.ctx.fillStyle=e;const a=s*this.game.gridConfig.cellWidth/this.tileSize+this.x*this.game.gridConfig.cellWidth|0,r=t*this.game.gridConfig.cellHeight/this.tileSize+this.y*this.game.gridConfig.cellHeight|0,l=this.game.gridConfig.cellWidth/this.tileSize,i=this.game.gridConfig.cellHeight/this.tileSize;this.layer.ctx.fillRect(a,r,l,i)}}this.layer.ctx.fill()}takeDamage(s){this.pveData=s,this.hp=s.npcHp,this.isFighting=!0,this.drawHp(),this.hp<=0&&(this.hp=this.maxHp,this.isFighting=!1)}drawHp(){this.layer.ctx.beginPath(),this.layer.ctx.fillStyle=l.Red,this.layer.ctx.fillRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight-7,this.game.gridConfig.cellWidth,5),this.layer.ctx.fillStyle=l.DarkGreen,this.layer.ctx.fillRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight-7,this.game.gridConfig.cellWidth*this.hp/this.maxHp,5),this.layer.ctx.fill(),this.drawHit()}drawHit(){let s="";this.layer.ctx.font="15px arial",this.layer.ctx.textAlign="center",0==this.pveData.damageCaused?this.layer.ctx.fillStyle=l.Blue:(this.layer.ctx.fillStyle=l.Red,s="-"),this.layer.ctx.fillText(`${s}${this.pveData.damageCaused}`,this.x*this.game.gridConfig.cellWidth+this.game.gridConfig.cellWidth/2,this.y*this.game.gridConfig.cellHeight-10)}move(s){s.x==this.x&&s.y==this.y||(this.isFighting=!1),this.x=s.x,this.y=s.y}clear(){this.layer.ctx.clearRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight,this.game.gridConfig.cellWidth,this.game.gridConfig.cellHeight)}destroy(){this.clear(),this.layer=null,this.id=0,this.x=0,this.y=0}}const p={Dog:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[l.Brown,0,0,0,0,l.Brown,0,l.Brown],[l.Brown,0,0,0,0,l.Brown,l.Brown,l.Brown],[0,l.Brown,l.Brown,l.Brown,l.Brown,l.Brown,l.Brown,l.Brown],[0,l.Brown,l.Brown,l.Brown,l.Brown,l.Brown,0,0],[0,l.Brown,0,0,0,l.Brown,0,0],[0,l.Brown,0,0,0,l.Brown,0,0]],Spider:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,l.Black,l.Black,l.Black,l.Black,0,0],[0,l.Black,l.Black,l.Black,l.Black,l.Black,l.Black,0],[0,l.Black,l.DarkPink2,l.Black,l.Black,l.DarkPink2,l.Black,0],[l.Black,l.Black,l.Black,l.Black,l.Black,l.Black,l.Black,l.Black],[l.Black,0,l.Black,0,0,l.Black,0,l.Black],[l.Black,0,l.Black,0,0,l.Black,0,l.Black]],Zero:[[0,0,0,l.LightGrey,l.LightGrey,0,0,0],[0,0,0,l.LightGrey,l.LightGrey,0,0,0],[0,0,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,0,0],[0,0,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,0,0],[0,0,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,0,0],[0,0,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,0,0],[0,0,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,0,0],[0,0,l.LightGrey,0,0,l.LightGrey,0,0]]};class u{constructor(s,t,e,a){this.game=s,this.layer=t,this.id=e.id,this.itemId=e.itemId,this.roomId=e.roomId,this.x=e.x,this.y=e.y,this.tileSize=8,this.itemMatrix=[...a]}draw(){this.layer.ctx.beginPath();for(let s=0;s<this.tileSize;s++)for(let t=0;t<this.tileSize;t++){const e=this.itemMatrix[t][s];if(0!==e){this.layer.ctx.fillStyle=e;const a=s*this.game.gridConfig.cellWidth/this.tileSize+this.x*this.game.gridConfig.cellWidth|0,r=t*this.game.gridConfig.cellHeight/this.tileSize+this.y*this.game.gridConfig.cellHeight|0,l=this.game.gridConfig.cellWidth/this.tileSize,i=this.game.gridConfig.cellHeight/this.tileSize;this.layer.ctx.fillRect(a,r,l,i)}}this.layer.ctx.fill()}clear(){this.layer.ctx.clearRect(this.x*this.game.gridConfig.cellWidth,this.y*this.game.gridConfig.cellHeight,this.game.gridConfig.cellWidth,this.game.gridConfig.cellHeight)}destroy(){this.clear(),this.layer=null,this.id=0,this.x=0,this.y=0}}const B={Empty:[[l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,0,0,0,0,0,0,l.LightGrey],[l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey,l.LightGrey]],Coffee:[[0,0,0,0,l.LightGrey,l.LightGrey,l.LightGrey,0],[0,0,0,0,l.LightGrey,l.LightGrey,0,0],[0,0,0,l.LightGrey,l.LightGrey,0,0,0],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,l.Grey,l.Grey],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,0,l.Grey],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,0,l.Grey],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,l.Grey,l.Grey],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,0,0]],Coin:[[0,0,0,l.Yellow,l.Yellow,0,0,0],[0,0,l.Yellow,l.Orange,l.Yellow,l.Yellow,0,0],[0,l.Yellow,l.Orange,l.Yellow,l.Yellow,l.Yellow,l.Yellow,0],[0,l.Yellow,l.Orange,l.Yellow,l.Yellow,l.Yellow,l.Yellow,0],[0,l.Yellow,l.Orange,l.Yellow,l.Yellow,l.Yellow,l.Yellow,0],[0,l.Yellow,l.Orange,l.Yellow,l.Yellow,l.Yellow,l.Yellow,0],[0,0,l.Yellow,l.Orange,l.Yellow,l.Yellow,0,0],[0,0,0,l.Yellow,l.Yellow,0,0,0]],BronzeDagger:[[0,0,0,0,0,0,0,0],[0,0,0,0,l.LightBrown,0,0,0],[0,0,0,l.LightBrown,l.LightBrown,0,0,0],[0,0,0,l.LightBrown,l.LightBrown,0,0,0],[0,0,0,l.LightBrown,l.LightBrown,0,0,0],[0,0,0,l.LightBrown,l.LightBrown,0,0,0],[0,0,l.Grey,l.Grey,l.Grey,l.Grey,0,0],[0,0,0,l.LightBrown,l.LightBrown,0,0,0]]};class L{constructor(s){this.game=s,this.playerListElement=document.getElementById("player-list");const t=document.getElementById("sprites-layer");this.ctx=t.getContext("2d"),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor="",this.ctx.canvas.width=this.game.gridConfig.width,this.ctx.canvas.height=this.game.gridConfig.height,this.players=[],this.npcs=[],this.items=[]}draw(s){this.ctx.clearRect(0,0,this.game.gridConfig.width,this.game.gridConfig.height),this.drawItems(s),this.drawPlayers(s),this.drawNpcs(s)}clear(){this.ctx.clearRect(0,0,this.game.gridConfig.width,this.game.gridConfig.height)}addPlayers(s){this.players.splice(0,this.players.length);for(const t of s)this.players.push(new w(this.game,t,this))}addNpcs(s){this.npcs.splice(0,this.npcs.length);for(const t of s)this.npcs.push(new y(this.game,this,t,this.getMatrixNpcById(t.npcId)))}addItems(s){this.items.splice(0,this.items.length);for(const t of s)this.items.push(new u(this.game,this,t,this.getMatrixItemById(t.itemId)))}addItem(s){this.items.push(new u(this.game,this,s,this.getMatrixItemById(s.itemId)))}removeItem(s){const t=this.items.findIndex(t=>t.x==s.x&&t.y==s.y);t>-1&&this.items.splice(t,1)}drawPlayers(s){for(;this.playerListElement.firstChild;)this.playerListElement.removeChild(this.playerListElement.firstChild);this.players.forEach(t=>{const e=document.createElement("li");e.appendChild(document.createTextNode(t.name)),e.style.color=t.color,this.playerListElement.appendChild(e),t.currentRoomId==s&&(t.draw(),t.isFighting&&t.drawHp())})}drawNpcs(s){this.npcs.forEach(t=>{t.roomId==s&&(t.draw(),t.isFighting&&t.drawHp())})}drawItems(s){this.items.forEach(t=>{t.roomId==s&&t.draw()})}getPlayerById(s){return this.players.find(t=>t.id===s)}getNpcByIdAndRoom(s,t){return this.npcs.find(e=>e.id===+s&&e.roomId===+t)}getMatrixNpcById(s){let t=p[Object.keys(p)[s-1]];return t||console.log("No sprite defined"),t}getMatrixItemById(s){let t=d[s];return B[t]}}const f={Tree:[[0,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,0],[l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen],[l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen],[l.DarkGreen2,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen2],[0,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,0],[0,0,0,l.Brown,l.Brown,0,0,0],[0,0,0,l.Brown,l.Brown,0,0,0],[0,0,0,l.Brown,l.Brown,0,0,0]],SmallTree:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,0,0],[0,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,0],[0,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,0],[0,0,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,l.DarkGreen2,0,0],[0,0,0,l.Brown,l.Brown,0,0,0],[0,0,0,l.Brown,l.Brown,0,0,0]],FlatGrass:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],Grass:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],Grass2:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],Grass3:[[l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],TallGrass:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green,l.Green4,l.Green,l.Green4,l.Green,l.Green,l.Green],[l.Green4,l.Green,l.Green,l.Green4,l.Green4,l.Green,l.Green4,l.Green],[l.Green,l.DarkGreen,l.Green,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.Green,l.Green]],TallGrass2:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green,l.Green4,l.Green,l.Green4,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green4,l.Green4,l.Green,l.Green4,l.Green],[l.Green,l.Green,l.Green4,l.Green4,l.Green4,l.Green4,l.Green,l.Green]],TallGrass3:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green],[l.Green4,l.Green,l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green4,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.Green,l.Green,l.Green4,l.Green,l.Green4,l.Green],[l.Green4,l.Green,l.Green4,l.Green4,l.Green,l.Green4,l.Green,l.Green],[l.Green,l.Green4,l.Green4,l.Green4,l.Green4,l.Green4,l.Green,l.Green4],[l.Green,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.Green]],Bush:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green4,l.Green4,l.Green4,l.Green,l.Green,l.Green],[l.Green,l.Green4,l.DarkGreen,l.Green4,l.Green4,l.Green4,l.Green,l.Green],[l.Green4,l.Green4,l.Green4,l.Green4,l.DarkGreen,l.Green4,l.Green4,l.Green],[l.DarkGreen,l.Green4,l.DarkGreen,l.Green4,l.Green4,l.Green4,l.DarkGreen,l.Green],[l.Green,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.DarkGreen,l.Green,l.Green]],DirtLeft:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green2,l.Green,l.Green],[l.Green,l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.Green2,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.Green,l.Green,l.Green2,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown]],DirtRight:[[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green2,l.Green,l.Green,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green2,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green2,l.Green,l.Green,l.Green],[l.LightBrown,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],DirtUp:[[l.Green,l.Green,l.Green,l.Green2,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.LightBrown,l.LightBrown,l.Green,l.Green,l.Green],[l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green,l.Green],[l.Green,l.Green2,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green2],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown]],DirtDown:[[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.Green,l.Green,l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],Dirt:[[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown],[l.Green,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.LightBrown,l.Green]],Rocks:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Grey,l.Green,l.Green],[l.Green,l.Grey,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Grey,l.Green,l.Green,l.Grey,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]],Rocks2:[[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Grey,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Grey,l.Green,l.Green,l.Green,l.Green,l.Green],[l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green,l.Green]]},k=[[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,2],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,2,0,0,0,0,1,0,0,2,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]],x=[[1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0],[0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,2,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],I=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],[0,0,1,2,0,0,0,0,0,0,0,1,0,0,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,2,0,0,0,0,0,0],[0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,2,1,0,0],[0,0,0,0,2,0,0,0,0,0,0,0,0,1,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],D=[[2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],E=[[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],b=[[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,2,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];class S{constructor(s,t,e,a,r){this.game=s,this.layer=t,this.id=0,this.x=e,this.y=a,this.tileSize=8,this.tileMatrix=r}draw(){this.layer.ctx.beginPath();for(let s=0;s<this.tileSize;s++)for(let t=0;t<this.tileSize;t++){const e=this.tileMatrix[t][s];if(0!==e){this.layer.ctx.fillStyle=e;const a=s*this.game.gridConfig.cellWidth/this.tileSize+this.x*this.game.gridConfig.cellWidth|0,r=t*this.game.gridConfig.cellHeight/this.tileSize+this.y*this.game.gridConfig.cellHeight|0,l=this.game.gridConfig.cellWidth/this.tileSize,i=this.game.gridConfig.cellHeight/this.tileSize;this.layer.ctx.fillRect(a,r,l,i)}}this.layer.ctx.fill()}clear(){this.layer.ctx.clearRect(this.x,this.y,this.game.gridConfig.cellWidth,this.game.gridConfig.cellHeight)}destroy(){this.clear(),this.game=null,this.layer=null,this.id=0,this.x=0,this.y=0}}class C{constructor(s,t,e,a){this.game=s,this.id=t,this.backgroundLayerShape=e,this.solidLayerShape=a,this.tiles=[],this.initTiles()}initTiles(){for(let s=0;s<this.game.gridConfig.columns;s++)for(let t=0;t<this.game.gridConfig.rows;t++){const e=this.backgroundLayerShape[t][s];0!=e&&this.tiles.push(new S(this.game,this.game.backgroundLayer,s,t,e));const a=this.solidLayerShape[t][s];if(0!=a){const e=f[Object.keys(f)[a-1]];this.tiles.push(new S(this.game,this.game.solidLayer,s,t,e))}}}draw(){for(const s of this.tiles)s.draw()}clear(){this.game.backgroundLayer.clear(),this.game.solidLayer.clear()}}const v=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass],[f.Dirt,f.Dirt,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class R extends C{constructor(s,t){super(s,t,v,x)}}const T=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.TallGrass2,f.Grass2,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Rocks2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.Bush,f.Grass2,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass],[f.FlatGrass,f.TallGrass2,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass,f.Grass2,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.Grass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3],[f.Grass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.TallGrass3,f.FlatGrass,f.FlatGrass,f.Grass2],[f.TallGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.Grass3,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.Rocks2,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class P extends C{constructor(s,t){super(s,t,T,I)}}const M=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Bush,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Grass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass3],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.TallGrass,f.FlatGrass,f.Grass3],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.Grass,f.FlatGrass,f.Grass,f.Bush,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class H extends C{constructor(s,t){super(s,t,M,D)}}const W=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.Dirt,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass3,f.Grass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.TallGrass2,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.Dirt,f.Dirt,f.FlatGrass,f.FlatGrass,f.Rocks2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass3,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass3,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.TallGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.Rocks2,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.Dirt,f.Dirt,f.Rocks,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Dirt,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class N extends C{constructor(s,t){super(s,t,W,E)}}const O=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.Rocks2,f.Grass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.Bush,f.TallGrass3,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass3,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass3,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class z extends C{constructor(s,t){super(s,t,O,b)}}const Y=[[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.Rocks,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Grass,f.Rocks2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.DirtLeft,f.Dirt],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Rocks,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.Bush,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.TallGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.TallGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.Rocks2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass],[f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.Grass2,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass,f.FlatGrass]];class $ extends C{constructor(s,t){super(s,t,Y,k)}}class U{constructor(s){this.game=s,this.rooms=this.buildMap()}getRoomById(s){return this.rooms.find(t=>t.id===s)||this.rooms[s]}buildMap(){return[new $(this.game,g.Initial),new R(this.game,g.Woods),new P(this.game,g.Woods2),new H(this.game,g.Woods9),new N(this.game,g.Woods10),new z(this.game,g.Woods11)]}}class A{constructor(s,t){this.game=s,this.layer=t}draw(){this.layer.clear(),this.layer.ctx.beginPath(),this.layer.ctx.rect(0,0,this.game.gridConfig.width,this.game.gridConfig.height),this.layer.ctx.stroke()}}class j{constructor(s,t){this.gridConfig=new i.GridConfig({width:s.width,height:s.height,rows:16,columns:16}),this.backgroundLayer=new G(this),this.solidLayer=new n(this),this.spritesLayer=new L(this),this.map=new U(this),this.board=new A(this,this.backgroundLayer),t.isMobile()&&(t.mobileControls.style.display="block")}applyServerRules(s){this.gridConfig.rows=s.boardRows,this.gridConfig.columns=s.boardColumns,this.board.draw(),this.map.rooms[g.Initial].draw()}}class X{constructor(s){const t=this.parseString(s);this.playerId=t[1],this.serverRules={boardRows:+t[2],boardColumns:+t[3]},this.players=JSON.parse(t[4])}parseString(s){let t=s,e="";t=s.substr(0,s.indexOf(",[")),e=s.substr(s.indexOf("["),s.length);let a=t.split(",");return a.push(e),a}}class K{constructor(s){const t=this.parseString(s);this.playerId=t[1],this.currentRoomId=+t[4],this.x=+t[2],this.y=+t[3]}parseString(s){return s.split(",")}}class V{constructor(s){const t=this.parseString(s);this.id=+t[1],this.npcId=+t[2],this.x=+t[3],this.y=+t[4],this.roomId=+t[5]}parseString(s){return s.split(",")}}class _{constructor(s){const t=this.parseString(s);this.npcs=JSON.parse(t[1])}parseString(s){let t=s,e="";t=s.substr(0,s.indexOf(",[")),e=s.substr(s.indexOf("["),s.length);let a=t.split(",");return a.push(e),a}}class J{constructor(s){const t=this.parseString(s);this.attacker=t[1],this.damageCaused=+t[2],this.npcHp=+t[3],this.npcId=t[4],this.playerHp=+t[5],this.playerId=t[6],this.roomId=t[7]}parseString(s){return s.split(",")}}class Z{constructor(s){const t=this.parseString(s);this.message=t[1]}parseString(s){return s.split(",")}}class q{constructor(s){const t=this.parseString(s);this.playerId=t[1],this.itemId=+t[2],this.coins=+t[3],this.x=+t[4],this.y=+t[5]}parseString(s){return s.split(",")}}class Q{constructor(s){const t=this.parseString(s);this.id=+t[1],this.itemId=+t[2],this.roomId=+t[3],this.x=+t[4],this.y=+t[5]}parseString(s){return s.split(",")}}class ss{constructor(s){this.items=this.parseString(s)}parseString(s){let t=[],e="",a=+s.substr(0,s.indexOf(",[")).split(",")[1];e=s.substr(s.indexOf("["),s.length);let r=JSON.parse(e);for(const s of r)t.push(new ts(s.id,s.itemId,a,s.x,s.y));return t}}class ts{constructor(s,t,e,a,r){this.id=s,this.itemId=t,this.roomId=e,this.x=a,this.y=r}}class es{constructor(s){const t=this.parseString(s);this.itemId=t}parseString(s){return+s.split(",")[1]}}class as{constructor(s){const t=this.parseString(s);this.itemId=+t[1],this.gearType=+t[2]}parseString(s){return s.split(",")}}class rs{constructor(s){const t=this.parseString(s);this.itemId=+t[1]}parseString(s){return s.split(",")}}class ls{constructor(s){const t=this.parseString(s);this.itemId=+t[1]}parseString(s){return s.split(",")}}class is{constructor(s){const t=this.parseString(s);this.hp=+t[1],this.maxHp=+t[2],this.attack=+t[3],this.defense=+t[4],this.level=+t[5],this.xp=+t[6],this.xpNeeded=+t[7]}parseString(s){return s.split(",")}}class Gs{constructor(s){const t=this.parseString(s);this.message=t}parseString(s){const t=s.indexOf(',"')+2,e=s.split(',"')[1].indexOf('"')+t;return s.substring(t,e)}}class ns{constructor(s){const t=this.parseString(s);this.top1Name=t[1],this.top1Level=+t[2],this.top2Name=t[3],this.top2Level=+t[4],this.top3Name=t[5],this.top3Level=+t[6]}parseString(s){return s.split(",")}}class hs{constructor(s){const t=this.parseString(s);this.message=t}parseString(s){const t=s.indexOf(',"')+2,e=s.split(',"')[1].indexOf('"')+t;return s.substring(t,e)}}class os{constructor(s){this.client=s}parse(s){try{switch(+s.split(",")[0]){case F.Login:this.parseLogin(s);break;case F.Move:this.parseMove(s);break;case F.NpcsInRoom:this.parseNpcsInRoom(s);break;case F.NpcMove:this.parseNpcMove(s);break;case F.Pve:this.parsePve(s);break;case F.ItemsInRoom:this.parseItemsInRoom(s);break;case F.ItemDrop:this.parseItemDrop(s);break;case F.ItemPick:this.parseItemPick(s);break;case F.ItemUse:this.parseItemUse(s);break;case F.ItemWear:this.parseItemWear(s);break;case F.ItemRemove:this.parseItemRemove(s);break;case F.ItemDroped:this.parseItemDroped(s);break;case F.Stats:this.parseStats(s);break;case F.Rank:this.parseRank(s);break;case F.Dialog:this.parseDialog(s);break;case F.Message:this.parseMessage(s);break;case F.Error:this.parseError(s)}}catch(s){console.log(s)}}parseLogin(s){const t=new X(s);if(this.client.game.spritesLayer.addPlayers(t.players),!1===this.client.loggedIn){this.client.loggedIn=!0,this.client.playerId=t.playerId,this.client.bag.playerId=t.playerId,this.client.gear.playerId=t.playerId,this.client.game.applyServerRules(t.serverRules);const s=t.players.find(s=>s.id==t.playerId);this.client.applyStats(s.hp,s.maxHp,s.atk,s.def,1,0,s.xpNeed)}this.client.drawSprites()}parseMove(s){const t=new K(s);this.client.updatePlayer(t)}parseNpcMove(s){const t=new V(s);this.client.updateNpc(t)}parseNpcsInRoom(s){const t=new _(s);this.client.game.spritesLayer.addNpcs(t.npcs),this.client.drawSprites()}parsePve(s){const t=new J(s);this.client.drawPve(t)}parseError(s){const t=new Z(s);confirm(t.message)&&window.location.reload()}parseItemsInRoom(s){const t=new ss(s);this.client.game.spritesLayer.addItems(t.items)}parseItemDrop(s){const t=new Q(s);this.client.game.spritesLayer.addItem(t)}parseItemDroped(s){const t=new ls(s);this.client.bag.removeItem(t.itemId)}parseItemPick(s){const t=new q(s);this.client.pickItem(t)}parseItemUse(s){const t=new es(s);this.client.bag.removeItem(t.itemId)}parseItemWear(s){const t=new as(s);this.client.bag.removeItem(t.itemId),this.client.gear.addGear(t.itemId,t.gearType)}parseItemRemove(s){const t=new rs(s);this.client.removedGear(t),this.client.gear.removeGear(t.itemId)}parseStats(s){const t=new is(s);this.client.applyStats(t.hp,t.maxHp,t.attack,t.defense,t.level,t.xp,t.xpNeeded)}parseRank(s){const t=new ns(s);this.client.updateRank(t)}parseMessage(s){const t=new Gs(s);this.client.displayMessage(t.message)}parseDialog(s){const t=new hs(s);this.client.displayDialog(t.message)}}class Fs{constructor(s){this.width=32,this.height=32,this.boardRows=1,this.boardColumns=1,this.canvasId=s,this.c=document.getElementById(s),this.ctx=this.c.getContext("2d"),this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.boardRows=1,this.boardColumns=1,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.cellWidth=this.width/this.boardRows,this.cellHeight=this.height/this.boardColumns,this.c.oncontextmenu=s=>!1}}class gs{constructor(s,t,e,a){this.tileSize=8,this.bag=s,this.itemId=t,this.item=e,this.layer=new Fs(a)}draw(){this.layer.ctx.beginPath();for(let s=0;s<this.tileSize;s++)for(let t=0;t<this.tileSize;t++){const e=this.item[t][s];if(0!==e){this.layer.ctx.fillStyle=e;const a=s*this.layer.cellWidth/this.tileSize|0,r=t*this.layer.cellHeight/this.tileSize|0,l=this.layer.cellWidth/this.tileSize,i=this.layer.cellHeight/this.tileSize;this.layer.ctx.fillRect(a,r,l,i)}}this.layer.ctx.fill()}destroy(){this.layer=null,this.itemId=null,this.draw=null}}class cs{constructor(s){this.items=[],this.coins=0,this.size=24,this.playerId="",this.itemsCount=0,this.itemsHolderEl=document.getElementById("items"),this.coinsEl=document.getElementById("coins"),this.client=s}drawItems(){for(const s of this.items)s.draw()}addGold(s){this.coins+=s,this.coinsEl.innerHTML="Gold: "+this.coins}addItem(s,t,e){if(this.playerId==e)if(s==d.Coin)this.addGold(t);else if(this.items.length<this.size){this.itemsCount++;const t=this.getItemSprite(s),e=this.addCanvasNode(s);this.items.push(new gs(this,s,t,e)),this.drawItems()}}clickItem(s,t){"mouseup"===s.type?"mouseup"===s.type?0==s.button?this.client.useItem(t):2==s.button&&this.client.dropItem(t):this.client.useItem(t):"touchmove"===s.type&&this.client.dropItem(t)}removeItem(s){if(s!=d.Empty){const t=this.items.map(s=>s.itemId).indexOf(s),e=this.items[t].layer.canvasId;t>-1&&this.items.splice(t,1);const a=document.getElementById(e);this.itemsHolderEl.removeChild(a)}}getItemSprite(s){let t=d[s];return B[t]}addCanvasNode(s){let t=`${s}-${this.itemsCount}`,e=document.createElement("canvas");return e.classList.add("item-btn"),e.id=t,e.onmouseup=t=>this.clickItem(t,s),e.ontouchstart=t=>this.clickItem(t,s),e.ontouchmove=t=>this.clickItem(t,s),e.oncontextmenu=()=>!1,this.itemsHolderEl.appendChild(e),t}}class ds{constructor(s){this.width=32,this.height=32,this.boardRows=1,this.boardColumns=1,this.canvasId=s,this.c=document.getElementById(s),this.ctx=this.c.getContext("2d"),this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.boardRows=1,this.boardColumns=1,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.cellWidth=this.width/this.boardRows,this.cellHeight=this.height/this.boardColumns,this.c.oncontextmenu=s=>!1}}class ms{constructor(s,t,e,a){this.tileSize=8,this.gear=s,this.itemId=t,this.item=e,this.layer=new ds(a)}draw(){this.layer.ctx.beginPath();for(let s=0;s<this.tileSize;s++)for(let t=0;t<this.tileSize;t++){const e=this.item[t][s];if(0!==e){this.layer.ctx.fillStyle=e;const a=s*this.layer.cellWidth/this.tileSize|0,r=t*this.layer.cellHeight/this.tileSize|0,l=this.layer.cellWidth/this.tileSize,i=this.layer.cellHeight/this.tileSize;this.layer.ctx.fillRect(a,r,l,i)}}this.layer.ctx.fill()}clear(){this.layer.ctx.clearRect(0,0,this.layer.cellWidth,this.layer.cellHeight)}changeGear(s,t){this.clear(),this.itemId=s,this.item=t}destroy(){this.layer=null,this.itemId=null,this.draw=null}}class ws{constructor(s){this.playerId="",this.head=new ms(this,d.Empty,B.Empty,"head"),this.torso=new ms(this,d.Empty,B.Empty,"torso"),this.legs=new ms(this,d.Empty,B.Empty,"legs"),this.weapon=new ms(this,d.Empty,B.Empty,"weapon"),this.head.layer.c.onmousedown=s=>this.clickItem(s,this.head),this.torso.layer.c.onmousedown=s=>this.clickItem(s,this.torso),this.legs.layer.c.onmousedown=s=>this.clickItem(s,this.legs),this.weapon.layer.c.onmousedown=s=>this.clickItem(s,this.weapon),this.head.layer.c.ontouchstart=s=>this.clickItem(s,this.head),this.torso.layer.c.ontouchstart=s=>this.clickItem(s,this.torso),this.legs.layer.c.ontouchstart=s=>this.clickItem(s,this.legs),this.weapon.layer.c.ontouchstart=s=>this.clickItem(s,this.weapon),this.head.layer.c.oncontextmenu=()=>!1,this.torso.layer.c.oncontextmenu=()=>!1,this.legs.layer.c.oncontextmenu=()=>!1,this.weapon.layer.c.oncontextmenu=()=>!1,this.client=s,this.drawGear()}drawGear(){this.head.draw(),this.torso.draw(),this.legs.draw(),this.weapon.draw()}addGear(s,t){switch(t){case m.Head:this.head.itemId==d.Empty&&this.head.changeGear(s,this.getItemSprite(s));break;case m.Torso:this.torso.itemId==d.Empty&&this.torso.changeGear(s,this.getItemSprite(s));break;case m.Legs:this.legs.itemId==d.Empty&&this.legs.changeGear(s,this.getItemSprite(s));break;case m.Weapon:this.weapon.itemId==d.Empty&&this.weapon.changeGear(s,this.getItemSprite(s))}this.drawGear()}clickItem(s,t){t.itemId!=d.Empty&&("mousedown"!==s.type&&"touchstart"!==s.type&&"touchmove"!==s.type||("mousedown"===s.type?0==s.button&&this.client.removeGear(t.itemId):this.client.removeGear(t.itemId)))}removeGear(s){this.head.itemId==s&&this.head.changeGear(d.Empty,this.getItemSprite(d.Empty)),this.torso.itemId==s&&this.torso.changeGear(d.Empty,this.getItemSprite(d.Empty)),this.legs.itemId==s&&this.legs.changeGear(d.Empty,this.getItemSprite(d.Empty)),this.weapon.itemId==s&&this.weapon.changeGear(d.Empty,this.getItemSprite(d.Empty)),this.drawGear()}getItemSprite(s){let t=d[s];return B[t]}}class ys{constructor(s,t,e){document.onkeydown=this.checkKey.bind(this),this.loginScreen=e.loginScreen,this.gameScreen=e.gameScreen,this.bagElement=e.bagElement,this.coinsElement=e.coinsElement,this.gearElement=e.gearElement,this.hpTextElement=e.hpTextElement,this.xpTextElement=e.xpTextElement,this.hpBarElement=e.hpBarElement,this.xpBarElement=e.xpBarElement,this.atkTextElement=e.atkTextElement,this.defTextElement=e.defTextElement,this.messageElement=e.messageElement,this.rankElement=e.rankElement,this.playersElement=e.playersElement,this.top1Element=e.top1Element,this.top2Element=e.top2Element,this.top3Element=e.top3Element,this.isShowingMessage=!1,this.messageTimeout=0,this.up=e.mobileUp,this.up.onclick=()=>{this.checkKey({keyCode:38})},this.down=e.mobileDown,this.down.onclick=()=>{this.checkKey({keyCode:40})},this.left=e.mobileLeft,this.left.onclick=()=>{this.checkKey({keyCode:37})},this.right=e.mobileRight,this.right.onclick=()=>{this.checkKey({keyCode:39})},this.isShowingRank=!1,this.showRankBtn=e.showRankBtn,this.showRankBtn.onclick=()=>{this.toggleRank()},this.isShowingPlayerList=!1,this.showPlayersBtn=e.showPlayersBtn,this.showPlayersBtn.onclick=()=>{this.togglePlayers()},this.game=s,this.ws=null,this.loggedIn=!1,this.playerName=t.playerName,this.playerId="",this.bag=new cs(this),this.gear=new ws(this),this.currentRoomId=g.Initial,this.playerMatrix=t.playerMatrix,this.parser=new os(this),this.currentRoom=this.game.map.rooms[0],this.canMove=!0,this.setupWebSocket()}setupWebSocket(){let s="wss";"https:"!==location.protocol&&(s="ws"),this.ws=new WebSocket(`${s}://${window.location.host}/ws`),this.initWebSocket()}initWebSocket(){this.ws.onopen=()=>this.successfulConection(),this.ws.addEventListener("message",this.onReceiveMessage.bind(this)),window.onbeforeunload=()=>{this.ws.close()}}successfulConection(){this.ws.send(this.getPlayerLoginData()),this.gameScreen.style.display="block",this.bagElement.style.display="block",this.coinsElement.style.display="block",this.gearElement.style.display="block",this.hpTextElement.style.display="block",this.xpTextElement.style.display="block",this.loginScreen.style.display="none",this.pingPong()}getPlayerLoginData(){let s=JSON.stringify(this.playerMatrix);return F.Login+","+this.playerName+","+this.getRandomPlayerColor()+","+s}onReceiveMessage(s){const t=s.data;this.parser.parse(t)}updatePlayer(s){for(const t of this.game.spritesLayer.players)t.id==s.playerId&&(this.playerId==s.playerId&&s.currentRoomId!=this.currentRoomId&&(this.drawRoom(s.currentRoomId),this.currentRoomId=s.currentRoomId),t.move(s.x,s.y,s.currentRoomId));this.drawSprites()}updateNpc(s){const t=this.game.spritesLayer.getNpcByIdAndRoom(s.id,s.roomId);t.move(s),t.isFighting||this.drawSprites()}drawRoom(s){this.currentRoom.clear(),this.currentRoom=this.game.map.getRoomById(s),this.currentRoom.draw()}drawSprites(){this.game.spritesLayer.draw(this.currentRoomId)}checkKey(s){if(this.canMove){this.delayMove();let t=0;if(38==s.keyCode||87==s.keyCode?t=o.Up:40==s.keyCode||83==s.keyCode?t=o.Down:37==s.keyCode||65==s.keyCode?t=o.Left:39!=s.keyCode&&68!=s.keyCode||(t=o.Right),this.loggedIn){this.game.spritesLayer.getPlayerById(this.playerId).isValidMove(t,this.currentRoom.solidLayerShape)&&this.ws.send(`${F.Move},${t}`)}}}delayMove(){this.canMove=!1,setTimeout(()=>{this.canMove=!0},100)}drawPve(s){if(s.attacker==c.Npc){const t=this.game.spritesLayer.getPlayerById(s.playerId);t.takeDamage(s),this.updateHpElements(t.hp,t.maxHp,s.playerId)}else{this.game.spritesLayer.getNpcByIdAndRoom(s.npcId,s.roomId).takeDamage(s)}this.drawSprites()}applyStats(s,t,e,a,r,l,i){const G=this.game.spritesLayer.getPlayerById(this.playerId);G.hp=s,G.maxHp=t,this.updateHpElements(G.hp,G.maxHp,this.playerId),this.updateStatsElements(e,a,this.playerId),this.updateXpElements(r,l,i,this.playerId)}dropItem(s){this.ws.send(`${F.ItemDrop},${s}`)}useItem(s){this.ws.send(`${F.ItemUse},${s}`)}pickItem(s){this.bag.addItem(s.itemId,s.coins,s.playerId),this.game.spritesLayer.removeItem(s)}removeGear(s){this.ws.send(`${F.ItemRemove},${s}`)}removedGear(s){this.gear.removeGear(s.itemId),this.bag.addItem(s.itemId,0,this.playerId)}updateHpElements(s,t,e){if(this.playerId==e){this.hpTextElement.innerHTML=`HP: ${s}/${t}`;const e=s/t*100;this.hpBarElement.style.width=e+"%"}}updateStatsElements(s,t,e){this.playerId==e&&(this.atkTextElement.innerHTML="atk: "+s,this.defTextElement.innerHTML="def: "+t)}updateXpElements(s,t,e,a){if(this.playerId==a){this.xpTextElement.innerHTML="LVL "+s;const a=t/e*100;this.xpBarElement.style.width=a+"%"}}displayMessage(s){this.isShowingMessage||(this.isShowingMessage=!0,this.messageElement.innerHTML=s,setTimeout(()=>{this.isShowingMessage=!1,this.messageElement.innerHTML=""},5e3))}displayDialog(s){this.isShowingMessage||(clearTimeout(this.messageTimeout),this.messageElement.innerHTML=s,this.messageTimeout=setTimeout(()=>{this.messageElement.innerHTML=""},5e3))}updateRank(s){const t=0!=s.top1Level?`${s.top1Name}: LVL ${s.top1Level}`:"",e=0!=s.top2Level?`${s.top2Name}: LVL ${s.top2Level}`:"",a=0!=s.top3Level?`${s.top3Name}: LVL ${s.top3Level}`:"";this.top1Element.innerHTML=""+t,this.top2Element.innerHTML=""+e,this.top3Element.innerHTML=""+a}toggleRank(){this.isShowingRank?(this.isShowingRank=!1,this.showRankBtn.value="show rank",this.rankElement.style.display="none"):(this.isShowingRank=!0,this.showRankBtn.value="hide rank",this.rankElement.style.display="block")}togglePlayers(){this.isShowingPlayerList?(this.isShowingPlayerList=!1,this.showPlayersBtn.value="show players",this.playersElement.style.display="none"):(this.isShowingPlayerList=!0,this.showPlayersBtn.value="hide players",this.playersElement.style.display="block")}getRandomPlayerColor(){return h[Math.floor(Math.random()*h.length)]}pingPong(){this.ws.send(""+F.Ping),setTimeout(()=>{this.pingPong()},2e4)}}const ps={game:{width:512,height:512},drawingGrid:new i.GridConfig({width:160,height:160,rows:8,columns:8})};new class{constructor(s){this.loginScreen=document.getElementById("login"),this.resetCanvasBtn=document.getElementById("help-draw-mobile"),this.mobileControls=document.getElementById("mobile-controls"),this.playerNameInput=document.getElementById("player-name"),this.confirmBtn=document.getElementById("confirm-btn"),this.mobileUp=document.getElementById("up"),this.mobileDown=document.getElementById("down"),this.mobileLeft=document.getElementById("left"),this.mobileRight=document.getElementById("right"),this.gameScreen=document.getElementById("game"),this.bagElement=document.getElementById("bag"),this.gearElement=document.getElementById("gear"),this.coinsElement=document.getElementById("coins"),this.hpTextElement=document.getElementById("hp-text"),this.xpTextElement=document.getElementById("xp-text"),this.hpBarElement=document.getElementById("hp-bar"),this.xpBarElement=document.getElementById("xp-bar"),this.atkTextElement=document.getElementById("atk-text"),this.defTextElement=document.getElementById("def-text"),this.layersParentElement=document.getElementById("layers"),this.messageElement=document.getElementById("message"),this.showRankBtn=document.getElementById("show-rank"),this.showPlayersBtn=document.getElementById("show-players"),this.rankElement=document.getElementById("game-rank"),this.playersElement=document.getElementById("game-info"),this.top1Element=document.getElementById("top1"),this.top2Element=document.getElementById("top2"),this.top3Element=document.getElementById("top3"),this.gameScreen.style.display="none",this.bagElement.style.display="none",this.coinsElement.style.display="none",this.gearElement.style.display="none",this.hpTextElement.style.display="none",this.xpTextElement.style.display="none",this.isMobile()&&(this.setupMobile(),s.game.width=s.game.width/2,s.game.height=s.game.height/2),this.messageElement.style.maxWidth=s.game.width+"px",this.layersParentElement.style.width=s.game.width+"px",this.layersParentElement.style.height=s.game.height+"px",this.drawingGrid=new a(s.drawingGrid),this.playerConfig={playerName:"",playerMatrix:[]},this.gameConfig=s.game,this.game=null,this.client=null,this.hasConfirmedName=!1,this.confirmBtn.onclick=()=>{this.onConfirmName()},this.resetCanvasBtn.onclick=()=>{this.drawingGrid.reset()}}setupMobile(){document.body.addEventListener("touchmove",s=>{s.preventDefault()},{passive:!1});document.getElementById("help-draw-desktop").style.display="none",this.resetCanvasBtn.style.display="block",this.layersParentElement.style.width=window.screen.width+"px"}onConfirmName(){if(this.validUsername(this.playerNameInput.value)||alert("Insert a valid username (max length: 10)"),!this.hasConfirmedName&&this.playerNameInput.value&&this.validUsername(this.playerNameInput.value)){this.playerConfig.playerName=this.playerNameInput.value;if(this.drawingGrid.drawingMatrix.some(s=>s.some(s=>1===s))){if(this.hasConfirmedName=!0,this.playerConfig.playerMatrix=this.drawingGrid.drawingMatrix.map(s=>s.slice()),this.isMobile()){const s=document.getElementById("title"),t=document.getElementById("sub-title");s.style.fontSize="1em",t.style.fontSize="50%"}this.startGame()}}}startGame(){this.game=new j(this.gameConfig,this),this.client=new ys(this.game,this.playerConfig,this)}validUsername(s){return s.match(/^\w+$/)&&s.length<=10}isMobile(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(s=>navigator.userAgent.match(s))}}(ps)}]);